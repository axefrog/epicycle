export function configureRoutes(routeDefinitions) {
  const routes = routeDefinitions.reduce((acc, r) => Object.assign(acc, { [r.path]: r.component }), {});
  const paths = routeDefinitions.reduce((acc, r) => Object.assign(acc, { [r.id]: r.path }), {});
  return {
    routes, // to be passed to the router
    paths   // dictionary of route id to route path (for generating hrefs)
  };
}

export function applyRouter(sources, routes) {
  const {router} = sources;
  const {match$: route$} = router.define(routes);
  const sinks$ = route$.map(route => {
    const sinks = route.value({...sources, router: router.path(route.path)});
    return { route, sinks };
  });
  return sinks$;
}
